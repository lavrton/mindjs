(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

var _prototypeProperties = function (child, staticProps, instanceProps) {
  if (staticProps) Object.defineProperties(child, staticProps);
  if (instanceProps) Object.defineProperties(child.prototype, instanceProps);
};

var utils = require("./utils");

var Stage = function Stage(params) {
  if (!params) {
    utils["throw"]("params for Stage constructor required.");
  }
  if (!params.container) {
    utils["throw"]("container parameter is required.");
  }
  this._container = document.getElementById(params.container);

  this._container.style.width = params.width + "px";
  this._container.style.height = params.height + "px";

  this.width = params.width;
  this.height = params.height;

  //        this._initBackground();
  //        this._initAtomContainer();
  //        this._setupDragCamera();
  //        this._setupAtomDrag();
  //        this._setupCameraMoving();
  //        this._setupKeyboard();
};

Stage.prototype._setupAtomDrag = function () {
  var _this = this;
  var mc = new Hammer.Manager(this._container);

  mc.add(new Hammer.Pan({ threshold: 0, pointers: 0 }));

  mc.on("panstart", function (e) {
    dragElement = e.target;
  });
  mc.on("panmove", function (e) {
    var atom = dragElement._atom;
    if (!atom) {
      return;
    }
    atom.x = e.changedPointers[0].clientX + _this.camera.x;
    atom.y = e.changedPointers[0].clientY + _this.camera.y;
    atom._positioning();
  });
};

Stage.prototype.addAtom = function (o) {
  this.atoms.push(o);
  if (this._isAtomVisible(o)) {
    this._atomContainer.appendChild(o.node);
  }
};

Stage.prototype._isAtomVisible = function () {
  var cameraX = this.camera.x;
  var cameraY = this.camera.y;
  var screenWidth = this.width;
  var screenHeight = this.height;
  if (atom.x > cameraX - screenWidth && atom.x < cameraX + screenWidth * 2 && atom.y > cameraY - screenHeight && atom.y < cameraY + screenHeight * 2) {
    return true;
  } else {
    return false;
  }
};

//hide() {
//    this._container.style.display = 'none';
//}
//
//show() {
//    this._container.style.display = '';
//}

Stage.prototype.setSize = function (param) {};

Stage.prototype._positionBack = function () {
  this._back.style["background-position"] = -this.camera.x + "px " + -this.camera.y + "px";
};

Stage.prototype._initBackground = function () {
  this._back = document.createElement("div");
  this._container.appendChild(this._back);
  this._back.style.position = "absolute";
  this._back.style.transform = "translateZ(-1)";
  this._back.style["-webkit-transform"] = "translateZ(-1)";
  this._back.style.width = "100%";
  this._back.style.height = "100%";
  this._positionBack();
};

Stage.prototype._positionAtomContainer = function () {
  this._atomContainer.style.transform = "translateX(" + -this.camera.x + "px) translateY(" + -this.camera.y + "px)";
  this._atomContainer.style["-webkit-transform"] = "translateX(" + -this.camera.x + "px) translateY(" + -this.camera.y + "px)";
};

Stage.prototype._initAtomContainer = function () {
  this._atomContainer = document.createElement("div");
  this._container.appendChild(this._atomContainer);
  this._atomContainer.style.position = "absolute";
  this._atomContainer.style.transform = "translateZ(-1)";
  this._atomContainer.style["-webkit-transform"] = "translateZ(-1)";
  this._positionAtomContainer();
};

Stage.prototype._setupDragCamera = function () {
  var _this2 = this;
  var mc = new Hammer.Manager(this._back);

  mc.add(new Hammer.Pan({ threshold: 0, pointers: 0 }));

  var previous = {};
  mc.on("panstart", function (e) {
    previous = e.center;
  });
  mc.on("panmove", function (e) {
    var newPos = {
      x: e.center.x + e.deltaX,
      y: e.center.y + e.deltaY
    };
    var dx = previous.x - newPos.x;
    var dy = previous.y - newPos.y;
    _this2.camera.move(dx, dy);
    _this2._positionBack();
    _this2._positionAtomContainer();
    _this2._requestCheckVisiability();
    previous = newPos;
  });
};

Stage.prototype._requestCheckVisiability = function () {
  var _this3 = this;
  if (this._checkVisibilityWaiting) {
    return;
  }
  this._checkVisibilityWaiting = true;
  setTimeout(function () {
    _this3.atoms.forEach(function (atom) {
      var visible = _this3._isAtomVisible(atom);
      if (visible && !atom.node.parentElement) {
        _this3._atomContainer.appendChild(atom.node);
      } else if (!visible && atom.node.parentElement) {
        atom.node.parentElement.removeChild(atom.node);
      }
    });
    _this3._checkVisibilityWaiting = false;
  }, 100);
};

Stage.prototype._setupCameraMoving = function () {};

Stage.prototype._setupKeyboard = function () {
  var _this4 = this;
  window.onkeydown = function (e) {
    if (e.keyCode === 37) {
      _this4.camera.x -= 3;
    }
    if (e.keyCode === 38) {
      _this4.camera.y -= 3;
    }
    if (e.keyCode === 39) {
      _this4.camera.x += 3;
    }
    if (e.keyCode === 40) {
      _this4.camera.y += 3;
    }
  };
};

_prototypeProperties(Stage, null, {
  background: {
    set: function (background) {
      if (background.indexOf("/") !== -1) {
        this._back.style["background-image"] = "url(\"" + background + "\")";
        this._back.style["background-color"] = "";
      } else {
        this._back.style["background-image"] = "";
        this._back.style["background-color"] = background;
      }
    },
    enumerable: true
  }
});

module.exports = Stage;
//this._stage.setWidth(param.width);
//this._stage.setHeight(param.height);
//this._back.width(param.width);
//this._back.height(param.height);
//this.camera.trigger('change');
//this.camera.trigger('change:scale');
//this._backLayer.draw();

},{"./utils":3}],2:[function(require,module,exports){
"use strict";

(function (root, factory) {
  // Set up Backbone appropriately for the environment. Start with AMD.
  if (typeof define === "function" && define.amd) {
    define([], function () {
      // Export global even in AMD case in case this script is loaded with
      // others that may still expect a global Backbone.
      root.Mind = factory();
    });

    // Next for Node.js or CommonJS. jQuery may not be needed as a module.
  } else if (typeof exports !== "undefined") {
    module.exports = factory();
    window.Mind = module.exports;
    // Finally, as a browser global.
  } else {
    root.Mind = factory();
  }
})(this, function factory() {
  var Stage = require("./Stage");
  var Mind = {
    Stage: Stage
  };
  return Mind;
});

},{"./Stage":1}],3:[function(require,module,exports){
"use strict";

module.exports["throw"] = function (message) {
  throw "MindJS Error: " + message;
};

},{}]},{},[2])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbGF2cnRvblxcRHJvcGJveFxcUHJvamVjdHNcXG1pbmRqc1xcbm9kZV9tb2R1bGVzXFxndWxwLWJyb3dzZXJpZnlcXG5vZGVfbW9kdWxlc1xcYnJvd3NlcmlmeVxcbm9kZV9tb2R1bGVzXFxicm93c2VyLXBhY2tcXF9wcmVsdWRlLmpzIiwiQzovVXNlcnMvbGF2cnRvbi9Ecm9wYm94L1Byb2plY3RzL21pbmRqcy9zcmMvU3RhZ2UuanMiLCJDOi9Vc2Vycy9sYXZydG9uL0Ryb3Bib3gvUHJvamVjdHMvbWluZGpzL3NyYy9mYWtlXzQxNzQyOWJiLmpzIiwiQzovVXNlcnMvbGF2cnRvbi9Ecm9wYm94L1Byb2plY3RzL21pbmRqcy9zcmMvdXRpbHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7O0FDQUEsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDOztJQUV6QixLQUFLLEdBRUksU0FGVCxLQUFLLENBRUssTUFBTSxFQUFFO0FBQ2hCLE1BQUksQ0FBQyxNQUFNLEVBQUU7QUFDVCxTQUFLLFNBQU0sQ0FBQyx3Q0FBd0MsQ0FBQyxDQUFBO0dBQ3hEO0FBQ0QsTUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUU7QUFDbkIsU0FBSyxTQUFNLENBQUMsa0NBQWtDLENBQUMsQ0FBQTtHQUNsRDtBQUNELE1BQUksQ0FBQyxVQUFVLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7O0FBRTVELE1BQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztBQUNsRCxNQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7O0FBRXBELE1BQUksQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQztBQUMxQixNQUFJLENB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Ozs7R0FHTixNQUFNLElBQUksT0FBTyxPQUFPLEtBQUssV0FBVyxFQUFFO0FBQ3ZDLFVBQU0sQ0FBQyxPQUFPLEdBQUcsT0FBTyxFQUFFLENBQUM7QUFDM0IsVUFBTSxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDOztHQUVoQyxNQUFNO0FBQ0gsUUFBSSxDQUFDLElBQUksR0FBRyxPQUFPLEVBQUUsQ0FBQztHQUN6QjtDQUNKLENBQUEsQ0FBRSxJQUFJLEVBQUUsU0FBUyxPQUFPLEdBQUc7QUFDeEIsTUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQy9CLE1BQUksSUFBSSxHQUFHO0FBQ1AsU0FBSyxFQUFHLEtBQUs7R0FDaEIsQ0FBQTtBQUNELFNBQU8sSUFBSSxDQUFDO0NBQ2YsQ0FBQyxDQUFDOzs7OztBQ3ZCSCxNQUFNLENBQUMsT0FBTyxTQUFNLEdBQUcsVUFBUyxPQUFPLEVBQUU7QUFDckMsUUFBTSxnQkFBZ0IsR0FBRyxPQUFPLENBQUM7Q0FDcEMsQ0FBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpfXZhciBmPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGYsZi5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJ2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG5cbmNsYXNzIFN0YWdlIHtcblxuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICBpZiAoIXBhcmFtcykge1xuICAgICAgICAgICAgdXRpbHMudGhyb3coJ3BhcmFtcyBmb3IgU3RhZ2UgY29uc3RydWN0b3IgcmVxdWlyZWQuJylcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXBhcmFtcy5jb250YWluZXIpIHtcbiAgICAgICAgICAgIHV0aWxzLnRocm93KCdjb250YWluZXIgcGFyYW1ldGVyIGlzIHJlcXVpcmVkLicpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGFyYW1zLmNvbnRhaW5lcik7XG5cbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnN0eWxlLndpZHRoID0gcGFyYW1zLndpZHRoICsgJ3B4JztcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnN0eWxlLmhlaWdodCA9IHBhcmFtcy5oZWlnaHQgKyAncHgnO1xuXG4gICAgICAgIHRoaXMud2lkdGggPSBwYXJhbXMud2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gcGFyYW1zLmhlaWdodDtcblxuLy8gICAgICAgIHRoaXMuX2luaXRCYWNrZ3JvdW5kKCk7XG4vLyAgICAgICAgdGhpcy5faW5pdEF0b21Db250YWluZXIoKTtcbi8vICAgICAgICB0aGlzLl9zZXR1cERyYWdDYW1lcmEoKTtcbi8vICAgICAgICB0aGlzLl9zZXR1cEF0b21EcmFnKCk7XG4vLyAgICAgICAgdGhpcy5fc2V0dXBDYW1lcmFNb3ZpbmcoKTtcbi8vICAgICAgICB0aGlzLl9zZXR1cEtleWJvYXJkKCk7XG4gICAgfVxuXG4gICAgX3NldHVwQXRvbURyYWcoKSB7XG4gICAgICAgIHZhciBtYyA9IG5ldyBIYW1tZXIuTWFuYWdlcih0aGlzLl9jb250YWluZXIpO1xuXG4gICAgICAgIG1jLmFkZChuZXcgSGFtbWVyLlBhbih7IHRocmVzaG9sZDogMCwgcG9pbnRlcnM6IDAgfSkpO1xuXG4gICAgICAgIG1jLm9uKFwicGFuc3RhcnRcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGRyYWdFbGVtZW50ID0gZS50YXJnZXQ7XG4gICAgICAgIH0pO1xuICAgICAgICBtYy5vbihcInBhbm1vdmVcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIHZhciBhdG9tID0gZHJhZ0VsZW1lbnQuX2F0b207XG4gICAgICAgICAgICBpZiAoIWF0b20pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdG9tLnggPSBlLmNoYW5nZWRQb2ludGVyc1swXS5jbGllbnRYICsgdGhpcy5jYW1lcmEueDtcbiAgICAgICAgICAgIGF0b20ueSA9IGUuY2hhbmdlZFBvaW50ZXJzWzBdLmNsaWVudFkgICsgdGhpcy5jYW1lcmEueTtcbiAgICAgICAgICAgIGF0b20uX3Bvc2l0aW9uaW5nKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZGRBdG9tKG8pIHtcbiAgICAgICAgdGhpcy5hdG9tcy5wdXNoKG8pO1xuICAgICAgICBpZiAodGhpcy5faXNBdG9tVmlzaWJsZShvKSkge1xuICAgICAgICAgICAgdGhpcy5fYXRvbUNvbnRhaW5lci5hcHBlbmRDaGlsZChvLm5vZGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2lzQXRvbVZpc2libGUoKSB7XG4gICAgICAgIHZhciBjYW1lcmFYID0gdGhpcy5jYW1lcmEueDtcbiAgICAgICAgdmFyIGNhbWVyYVkgPSB0aGlzLmNhbWVyYS55O1xuICAgICAgICB2YXIgc2NyZWVuV2lkdGggPSB0aGlzLndpZHRoO1xuICAgICAgICB2YXIgc2NyZWVuSGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgICAgIGlmIChhdG9tLnggPiBjYW1lcmFYIC0gc2NyZWVuV2lkdGggICYmIGF0b20ueCA8IGNhbWVyYVggKyBzY3JlZW5XaWR0aCAqIDIgJiZcbiAgICAgICAgICAgIGF0b20ueSA+IGNhbWVyYVkgLSBzY3JlZW5IZWlnaHQgJiYgYXRvbS55IDwgY2FtZXJhWSArIHNjcmVlbkhlaWdodCAqIDIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0IGJhY2tncm91bmQoYmFja2dyb3VuZCkge1xuICAgICAgICBpZiAoYmFja2dyb3VuZC5pbmRleE9mKCcvJykgIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLl9iYWNrLnN0eWxlWydiYWNrZ3JvdW5kLWltYWdlJ10gPSAndXJsKFwiJyArIGJhY2tncm91bmQgKyAnXCIpJztcbiAgICAgICAgICAgIHRoaXMuX2JhY2suc3R5bGVbJ2JhY2tncm91bmQtY29sb3InXSA9ICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fYmFjay5zdHlsZVsnYmFja2dyb3VuZC1pbWFnZSddID0gJyc7XG4gICAgICAgICAgICB0aGlzLl9iYWNrLnN0eWxlWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSBiYWNrZ3JvdW5kO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy9oaWRlKCkge1xuICAgIC8vICAgIHRoaXMuX2NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIC8vfVxuICAgIC8vXG4gICAgLy9zaG93KCkge1xuICAgIC8vICAgIHRoaXMuX2NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgLy99XG5cbiAgICBzZXRTaXplKHBhcmFtKSB7XG4gICAgICAgIC8vdGhpcy5fc3RhZ2Uuc2V0V2lkdGgocGFyYW0ud2lkdGgpO1xuICAgICAgICAvL3RoaXMuX3N0YWdlLnNldEhlaWdodChwYXJhbS5oZWlnaHQpO1xuICAgICAgICAvL3RoaXMuX2JhY2sud2lkdGgocGFyYW0ud2lkdGgpO1xuICAgICAgICAvL3RoaXMuX2JhY2suaGVpZ2h0KHBhcmFtLmhlaWdodCk7XG4gICAgICAgIC8vdGhpcy5jYW1lcmEudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgIC8vdGhpcy5jYW1lcmEudHJpZ2dlcignY2hhbmdlOnNjYWxlJyk7XG4gICAgICAgIC8vdGhpcy5fYmFja0xheWVyLmRyYXcoKTtcbiAgICB9XG5cbiAgICBfcG9zaXRpb25CYWNrKCkge1xuICAgICAgICB0aGlzLl9iYWNrLnN0eWxlWydiYWNrZ3JvdW5kLXBvc2l0aW9uJ10gPSAtdGhpcy5jYW1lcmEueCArICdweCAnICsgLXRoaXMuY2FtZXJhLnkgKyAncHgnO1xuICAgIH1cblxuICAgIF9pbml0QmFja2dyb3VuZCgpIHtcbiAgICAgICAgdGhpcy5fYmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fYmFjayk7XG4gICAgICAgIHRoaXMuX2JhY2suc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICB0aGlzLl9iYWNrLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVaKC0xKSc7XG4gICAgICAgIHRoaXMuX2JhY2suc3R5bGVbJy13ZWJraXQtdHJhbnNmb3JtJ10gPSAndHJhbnNsYXRlWigtMSknO1xuICAgICAgICB0aGlzLl9iYWNrLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICB0aGlzLl9iYWNrLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgdGhpcy5fcG9zaXRpb25CYWNrKCk7XG4gICAgfVxuXG4gICAgX3Bvc2l0aW9uQXRvbUNvbnRhaW5lcigpIHtcbiAgICAgICAgdGhpcy5fYXRvbUNvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWCgnICsgLXRoaXMuY2FtZXJhLnggKyAncHgpIHRyYW5zbGF0ZVkoJyArIC10aGlzLmNhbWVyYS55ICsgJ3B4KSc7XG4gICAgICAgIHRoaXMuX2F0b21Db250YWluZXIuc3R5bGVbJy13ZWJraXQtdHJhbnNmb3JtJ10gPSAndHJhbnNsYXRlWCgnICsgLXRoaXMuY2FtZXJhLnggKyAncHgpIHRyYW5zbGF0ZVkoJyArIC10aGlzLmNhbWVyYS55ICsgJ3B4KSc7XG4gICAgfVxuXG4gICAgX2luaXRBdG9tQ29udGFpbmVyKCkge1xuICAgICAgICB0aGlzLl9hdG9tQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9hdG9tQ29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5fYXRvbUNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIHRoaXMuX2F0b21Db250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVooLTEpJztcbiAgICAgICAgdGhpcy5fYXRvbUNvbnRhaW5lci5zdHlsZVsnLXdlYmtpdC10cmFuc2Zvcm0nXSA9ICd0cmFuc2xhdGVaKC0xKSc7XG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uQXRvbUNvbnRhaW5lcigpO1xuICAgIH1cblxuXG4gICAgX3NldHVwRHJhZ0NhbWVyYSgpIHtcbiAgICAgICAgdmFyIG1jID0gbmV3IEhhbW1lci5NYW5hZ2VyKHRoaXMuX2JhY2spO1xuXG4gICAgICAgIG1jLmFkZChuZXcgSGFtbWVyLlBhbih7IHRocmVzaG9sZDogMCwgcG9pbnRlcnM6IDAgfSkpO1xuXG4gICAgICAgIHZhciBwcmV2aW91cyA9IHt9O1xuICAgICAgICBtYy5vbihcInBhbnN0YXJ0XCIsIChlKSA9PiB7XG4gICAgICAgICAgICBwcmV2aW91cyA9IGUuY2VudGVyO1xuICAgICAgICB9KTtcbiAgICAgICAgbWMub24oXCJwYW5tb3ZlXCIsIChlKSA9PiB7XG4gICAgICAgICAgICB2YXIgbmV3UG9zID0ge1xuICAgICAgICAgICAgICAgIHggOiBlLmNlbnRlci54ICsgZS5kZWx0YVgsXG4gICAgICAgICAgICAgICAgeSA6IGUuY2VudGVyLnkgKyBlLmRlbHRhWVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBkeCA9IHByZXZpb3VzLnggLSBuZXdQb3MueDtcbiAgICAgICAgICAgIHZhciBkeSA9IHByZXZpb3VzLnkgLSBuZXdQb3MueTtcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLm1vdmUoZHgsIGR5KTtcbiAgICAgICAgICAgIHRoaXMuX3Bvc2l0aW9uQmFjaygpO1xuICAgICAgICAgICAgdGhpcy5fcG9zaXRpb25BdG9tQ29udGFpbmVyKCk7XG4gICAgICAgICAgICB0aGlzLl9yZXF1ZXN0Q2hlY2tWaXNpYWJpbGl0eSgpO1xuICAgICAgICAgICAgcHJldmlvdXMgPSBuZXdQb3M7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9yZXF1ZXN0Q2hlY2tWaXNpYWJpbGl0eSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NoZWNrVmlzaWJpbGl0eVdhaXRpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jaGVja1Zpc2liaWxpdHlXYWl0aW5nID0gdHJ1ZTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmF0b21zLmZvckVhY2goKGF0b20pID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgdmlzaWJsZSA9IHRoaXMuX2lzQXRvbVZpc2libGUoYXRvbSk7XG4gICAgICAgICAgICAgICAgaWYgKHZpc2libGUgJiYgIWF0b20ubm9kZS5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2F0b21Db250YWluZXIuYXBwZW5kQ2hpbGQoYXRvbS5ub2RlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF2aXNpYmxlICYmIGF0b20ubm9kZS5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGF0b20ubm9kZS5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGF0b20ubm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLl9jaGVja1Zpc2liaWxpdHlXYWl0aW5nID0gZmFsc2U7XG4gICAgICAgIH0sIDEwMCk7XG4gICAgfVxuXG4gICAgX3NldHVwQ2FtZXJhTW92aW5nKCkge1xuICAgIH1cblxuICAgIF9zZXR1cEtleWJvYXJkKCkge1xuICAgICAgICB3aW5kb3cub25rZXlkb3duID0gKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDM3KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEueCAtPSAzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS55IC09IDM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAzOSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnggKz0gMztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDQwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEueSArPSAzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFN0YWdlOyIsIihmdW5jdGlvbihyb290LCBmYWN0b3J5KSB7XHJcbiAgICAvLyBTZXQgdXAgQmFja2JvbmUgYXBwcm9wcmlhdGVseSBmb3IgdGhlIGVudmlyb25tZW50LiBTdGFydCB3aXRoIEFNRC5cclxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuICAgICAgICBkZWZpbmUoW10sIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyBFeHBvcnQgZ2xvYmFsIGV2ZW4gaW4gQU1EIGNhc2UgaW4gY2FzZSB0aGlzIHNjcmlwdCBpcyBsb2FkZWQgd2l0aFxyXG4gICAgICAgICAgICAvLyBvdGhlcnMgdGhhdCBtYXkgc3RpbGwgZXhwZWN0IGEgZ2xvYmFsIEJhY2tib25lLlxyXG4gICAgICAgICAgICByb290Lk1pbmQgPSBmYWN0b3J5KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIE5leHQgZm9yIE5vZGUuanMgb3IgQ29tbW9uSlMuIGpRdWVyeSBtYXkgbm90IGJlIG5lZWRlZCBhcyBhIG1vZHVsZS5cclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XHJcbiAgICAgICAgd2luZG93Lk1pbmQgPSBtb2R1bGUuZXhwb3J0cztcclxuICAgICAgICAvLyBGaW5hbGx5LCBhcyBhIGJyb3dzZXIgZ2xvYmFsLlxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByb290Lk1pbmQgPSBmYWN0b3J5KCk7XHJcbiAgICB9XHJcbn0pKHRoaXMsIGZ1bmN0aW9uIGZhY3RvcnkoKSB7XHJcbiAgICB2YXIgU3RhZ2UgPSByZXF1aXJlKCcuL1N0YWdlJyk7XHJcbiAgICB2YXIgTWluZCA9IHtcclxuICAgICAgICBTdGFnZSA6IFN0YWdlXHJcbiAgICB9XHJcbiAgICByZXR1cm4gTWluZDtcclxufSk7XHJcbiIsIm1vZHVsZS5leHBvcnRzLnRocm93ID0gZnVuY3Rpb24obWVzc2FnZSkge1xyXG4gICAgdGhyb3cgJ01pbmRKUyBFcnJvcjogJyArIG1lc3NhZ2U7XHJcbn0iXX0=
